{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}

{% block content %}
  <div class="container py-5">
    <div class="card form-card mx-auto my-5 position-relative">
      <div class="card-header border-dark text-center text-bg-dark">
        <h3 class="m-0">출입 허가증</h3>
      </div>
      <div class="card-body">
        <form class="p-4 my-2" action="" method='POST'>
          {% csrf_token %}
          {% bootstrap_form form %}
          <div class="d-flex justify-content-end mt-5">
            <div class="m-2">
              {% load socialaccount %}
             
              <a href=" {% provider_login_url 'naver' %}"><img src="{% static 'images/navericon.png' %}"  style="width: 30px; height: 30px;"alt="네이버로그인"></a>
              <a href=" {% provider_login_url 'kakao' %}"><img src="{% static 'images/kakaoicon.png' %}"  style="width: 30px; height: 30px;"alt="카카오로그인"></a>
            </div>
            <input class="btn btn-dark" type="submit" value="출입 확인">
          </div>
          <img class="position-absolute bottom-0 start-0 my-3 mx-5" style="width:80px;" src="{%static 'images/enter.jpg' %}" alt="">
        </form>
      </div>
    </div>
  </div>
  
{% endblock content %}
{% comment %} {% block js %}
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.0.0/kakao.min.js"
  integrity="sha384-PFHeU/4gvSH8kpvhrigAPfZGBDPs372JceJq3jAXce11bVA6rMvGWzvP4fMQuBGL" crossorigin="anonymous"></script>
<script>
  Kakao.init(''); // 사용하려는 앱의 JavaScript 키 입력
</script>

<a id="kakao-login-btn" href="javascript:loginWithKakao()">
  <img src="{% static 'images/kakaoicon.png' %}"  style="width: 30px; height: 30px;"alt="카카오로그인">
</a>
<p id="token-result"></p>

<script>
  function loginWithKakao() {
    Kakao.Auth.authorize({
      redirectUri: 'http://127.0.0.1:8000',
    });
  }

  // 아래는 데모를 위한 UI 코드입니다.
  displayToken()
  function displayToken() {
    var token = getCookie('authorize-access-token');

    if(token) {
      Kakao.Auth.setAccessToken(token);
      Kakao.Auth.getStatusInfo()
        .then(function(res) {
          if (res.status === 'connected') {
            document.getElementById('token-result').innerText
              = 'login success, token: ' + Kakao.Auth.getAccessToken();
          }
        })
        .catch(function(err) {
          Kakao.Auth.setAccessToken(null);
        });
    }
  }

  function getCookie(name) {
    var parts = document.cookie.split(name + '=');
    if (parts.length === 2) { return parts[1].split(';')[0]; }
  }
</script>
{% endblock js %} {% endcomment %}