{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}
{% block content %}
  <div class="container">
    <section>
      <!-- 프로필 -->
      <h3 class="text-center">{{ user }}의 프로필</h3>
      <div class="row">
        <!-- 프로필 사진 / 팔로우-->
          <div class="m-2">
            {% if request.user != user %}
              <div>
                <form class='follow-form' data-user-pk='{{ user.pk }}'>
                  {% csrf_token %}
                  {% if request.user in user.followers.all %}
                    <input type="submit" class="btn btn-outline-secondary follow-btn" value='Unfollow'>
                  {% else %}
                    <input type="submit" class="btn btn-outline-secondary follow-btn" value='Follow'>
                  {% endif %}
                </form>
              </div>
            {% endif %}
          </div>
            <span class="m-0">
              following
              <span class='following-cnt'>{{ user.followings.all|length }}</span>
            </span>
            <span>
              follower
              <span class='follower-cnt'>{{ user.followers.all|length }}</span>
            </span>
          </div>
          <!-- 프로필 정보 -->
          <p>이름 : {{user.last_name}} {{user.first_name}}</p>
          
          <p>이메일 : {{user.email}}</p>
          
          {% if user.profile.image %}
            <img src="{{ user.profile.image.url }}" alt="{{ user.profile.image }}" class='mb-2'>
            {% else %}
            <img src="{% static 'images/no_image.png' %}" alt="no-profile-image" class='mb-2'>
            {% endif %}
            {% if user.profile.status_message %}
            <p class='fw-bold'>{{ user.profile.status_message }}</p>
            {% endif %}
            {% if request.user == user %}
            <div>
                <a href="{% url 'accounts:profile' request.user.pk %}" class='btn btn-outline-dark'>프로필 업데이트</a>
            </div>
          {% endif %}


        <div>
          <h4>작성한 글</h4>
          <p></p>
          <p></p>
        </div>
        <div>
          <h4>작성한 댓글</h4>
          <p></p>
          <p></p>
        </div>
        <div>
          <h4>좋아요한 식당</h4>
          <p></p>
          <p></p>
        </div>
  {% endblock %}

  {% block js %}
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="{% static 'js/accounts/detail.js' %}"></script>
{% endblock js %}
